<div id="dialog-receptionist">
    <main>
        @if (form) {
            <div class="form">
                <form [formGroup]="form">
                    <div class="responsive-row">
                        <div class="responsive-col-12">
                            <div class="picture">
                                <app-user-picture 
                                    [user]="receptionist"
                                    [height]="170"
                                    [width]="170"
                                    [upload]="true"
                                    (fileSelected)="onPictureSelected($event)"
                                />
                            </div>
                        </div>
                    </div>

                    <div class="responsive-row">
                        <div class="responsive-col-6">
                            <div class="input-field">
                                <label for="name">Nome</label>
                                <input
                                    pInputText
                                    id="name"
                                    type="text"
                                    name="name"
                                    formControlName="name"
                                    placeholder="Nome"
                                />
                                <app-hint
                                    [isError]="true"
                                    [message]="getErrorMessage(form, 'name')"
                                    [visible]="hasError(form, 'name')"
                                />
                            </div>
                        </div>

                        <div class="responsive-col-6">
                            <div class="input-field">
                                <label for="birthDate">Data de Nascimento</label>
                                <p-datepicker 
                                    inputId="birthDate"
                                    formControlName="birthDate"
                                    placeholder="Data de nascimento"
                                    dateFormat="dd/mm/yy"
                                    appendTo="body"
                                />
                                <app-hint
                                    [isError]="true"
                                    [message]="getErrorMessage(form, 'birthDate')"
                                    [visible]="hasError(form, 'birthDate')"
                                />
                            </div>
                        </div>
                    </div>

                    <div class="responsive-row">
                        <div class="responsive-col-6">
                            <div class="input-field">
                                <label for="email">E-mail</label>
                                <input
                                    pInputText
                                    id="email"
                                    type="text"
                                    name="email"
                                    formControlName="email"
                                    placeholder="E-mail"
                                />
                                <app-hint
                                    [isError]="true"
                                    [message]="getErrorMessage(form, 'email')"
                                    [visible]="hasError(form, 'email')"
                                />
                            </div>
                        </div>

                        <div class="responsive-col-3">
                            <div class="input-field">
                                <label for="phone">Telefone</label>
                                <p-inputmask 
                                    inputId="phone"
                                    formControlName="phone"
                                    placeholder="Telefone"
                                    mask="(99) 99999-9999"
                                    [unmask]="true"
                                />
                                <app-hint
                                    [isError]="true"
                                    [message]="getErrorMessage(form, 'phone')"
                                    [visible]="hasError(form, 'phone')"
                                />
                            </div>
                        </div>
                        <div class="responsive-col-3">
                            <div class="input-field">
                                <label for="status">Status</label>
                                <p-select 
                                    inputId="status"
                                    formControlName="status"
                                    placeholder="Selecione o status"
                                    appendTo="body"
                                    [options]="statusOptions"
                                />
                                <app-hint
                                    [isError]="true"
                                    [message]="getErrorMessage(form, 'status')"
                                    [visible]="hasError(form, 'status')"
                                />
                            </div>
                        </div>
                    </div>

                    <div class="responsive-row">
                        <div class="responsive-col-6">
                            <div class="input-field">
                                <label for="password">Senha</label>
                                <p-password 
                                    inputId="password"
                                    formControlName="password"
                                    placeholder="Senha"
                                    [feedback]="false"
                                    [toggleMask]="true"
                                    autocomplete="new-password"
                                />
                                <app-hint
                                    [isError]="true"
                                    [message]="getErrorMessage(form, 'password')"
                                    [visible]="hasError(form, 'password')"
                                />
                            </div>
                        </div>
                        
                        <div class="responsive-col-6">
                            <div class="input-field">
                                <label for="maritalStatus">Estado Civil</label>
                                <p-select 
                                    inputId="maritalStatus"
                                    formControlName="maritalStatus"
                                    placeholder="Selecione o estado civil"
                                    appendTo="body"
                                    [options]="maritalStatusOptions"
                                />
                                <app-hint
                                    [isError]="true"
                                    [message]="getErrorMessage(form, 'maritalStatus')"
                                    [visible]="hasError(form, 'maritalStatus')"
                                />
                            </div>
                        </div>
                    </div>
                    
                    <div class="responsive-row">
                        <div class="responsive-col-6">
                            <div class="input-field">
                                <label for="password">CPF</label>
                                <p-inputmask 
                                    inputId="cpf"
                                    formControlName="cpf"
                                    placeholder="CPF"
                                    mask="999.999.999-99"
                                    [unmask]="true"
                                />
                                <app-hint
                                    [isError]="true"
                                    [message]="getErrorMessage(form, 'cpf')"
                                    [visible]="hasError(form, 'cpf')"
                                />
                            </div>
                        </div>
                        
                        <div class="responsive-col-6">
                            <div class="input-field">
                                <label for="gender">Sexo</label>
                                <p-select 
                                    inputId="gender"
                                    formControlName="gender"
                                    placeholder="Selecione o sexo"
                                    appendTo="body"
                                    [options]="genderOptions"
                                />
                                <app-hint
                                    [isError]="true"
                                    [message]="getErrorMessage(form, 'gender')"
                                    [visible]="hasError(form, 'gender')"
                                />
                            </div>
                        </div>
                    </div>

                    <p-accordion [multiple]="true">
                        <p-accordion-panel [value]="0" formGroupName="address">
                            <p-accordion-header>Endereço</p-accordion-header>
                            <p-accordion-content>
                                <div class="responsive-row">
                                    <div class="responsive-col-6">
                                        <div class="input-field">
                                            <label for="zipCode">CEP</label>
                                            <p-inputmask 
                                                inputId="zipCode"
                                                formControlName="zipCode"
                                                placeholder="CEP"
                                                mask="99999-999"
                                                inputmode="numeric"
                                                [unmask]="true"
                                                (onComplete)="onZipCodeComplete()"
                                            />
                                            <app-hint
                                                [isError]="true"
                                                [message]="getErrorMessage(form, 'zipCode')"
                                                [visible]="hasError(form, 'zipCode')"
                                            />
                                        </div>
                                    </div>

                                    <div class="responsive-col-6">
                                        <div class="input-field">
                                            <label for="street">Logradouro</label>
                                            <input 
                                                pInputText
                                                id="street"
                                                formControlName="street"
                                                placeholder="Logradouro"
                                            />
                                            <app-hint
                                                [isError]="true"
                                                [message]="getErrorMessage(form, 'street')"
                                                [visible]="hasError(form, 'street')"
                                            />
                                        </div>
                                    </div>
                                </div>

                                <div class="responsive-row">
                                    <div class="responsive-col-6">
                                        <div class="input-field">
                                            <label for="number">Número</label>
                                            <input 
                                                pInputText
                                                id="number"
                                                formControlName="number"
                                                placeholder="Número"
                                            />
                                            <app-hint
                                                [isError]="true"
                                                [message]="getErrorMessage(form, 'number')"
                                                [visible]="hasError(form, 'number')"
                                            />
                                        </div>
                                    </div>

                                    <div class="responsive-col-6">
                                        <div class="input-field">
                                            <label for="neighborhood">Bairro</label>
                                            <input 
                                                pInputText
                                                id="neighborhood"
                                                formControlName="neighborhood"
                                                placeholder="Bairro"
                                            />
                                            <app-hint
                                                [isError]="true"
                                                [message]="getErrorMessage(form, 'neighborhood')"
                                                [visible]="hasError(form, 'neighborhood')"
                                            />
                                        </div>
                                    </div>
                                </div>

                                <div class="responsive-row">
                                    <div class="responsive-col-6">
                                        <div class="input-field">
                                            <label for="complement">Complemento</label>
                                            <input 
                                                pInputText
                                                id="complement"
                                                formControlName="complement"
                                                placeholder="Complemento"
                                            />
                                            <app-hint
                                                [isError]="true"
                                                [message]="getErrorMessage(form, 'complement')"
                                                [visible]="hasError(form, 'complement')"
                                            />
                                        </div>
                                    </div>
                                    
                                    <div class="responsive-col-6">
                                        <div class="input-field">
                                            <label for="city">Cidade</label>
                                            <input 
                                                pInputText
                                                id="city"
                                                formControlName="city"
                                                placeholder="Cidade"
                                            />
                                            <app-hint
                                                [isError]="true"
                                                [message]="getErrorMessage(form, 'city')"
                                                [visible]="hasError(form, 'city')"
                                            />
                                        </div>
                                    </div>
                                </div>

                                <div class="responsive-row" style="margin-bottom: 0;">
                                    <div class="responsive-col-6">
                                        <div class="input-field">
                                            <label for="state">Estado</label>
                                            <p-select 
                                                [options]="stateOptions"
                                                formControlName="state"
                                                placeholder="Selecione o estado"
                                                appendTo="body"
                                            />
                                            <app-hint
                                                [isError]="true"
                                                [message]="getErrorMessage(form, 'state')"
                                                [visible]="hasError(form, 'state')"
                                            />
                                        </div>
                                    </div>
                                    
                                    <div class="responsive-col-6">
                                        <div class="input-field">
                                            <label for="country">Pais</label>
                                            <p-select 
                                                inputId="country"
                                                formControlName="country"
                                                placeholder="Selecione o país"
                                                appendTo="body"
                                                [options]="countryOptions"
                                            />
                                            <app-hint
                                                [isError]="true"
                                                [message]="getErrorMessage(form, 'country')"
                                                [visible]="hasError(form, 'country')"
                                            />
                                        </div>
                                    </div>
                                </div>
                            </p-accordion-content>
                        </p-accordion-panel>
                    </p-accordion>
                </form>
            </div>
        }
    </main>

    <footer>
        <p-button 
            label="Salvar"
            class="button-green-white"
            [loading]="isSubmitting"
            [disabled]="!form || form.invalid"
            (onClick)="onSubmit()"
        />
    </footer>
</div>