<div class="media">

    @if (files && files.length > 0) {

        @if (files && files.length === 1) {
            <ng-container *ngTemplateOutlet="file; context: { $implicit: files[0] }" />
        } @else {
            <p-galleria
                [value]="files"
                [showThumbnails]="false"
                [showItemNavigators]="true"
            >
                <ng-template pTemplate="item" let-file>
                    <ng-container *ngTemplateOutlet="file; context: { $implicit: file }" />
                </ng-template>
            </p-galleria>
        }
    }
</div>

<ng-template #file let-file>
    <div class="container">
        <div class="element">
            @if (file.type === FileType.AUDIO) {
                <audio controls style="max-width: 100%; width: 100%;">
                    <source [src]="file.path" type="audio/mp3">
                </audio>
            }
        
            @if (file.type === FileType.IMAGE) {
                <p-image 
                    [src]="file.path" 
                    [preview]="true" 
                    [height]="height" 
                    [width]="width" 
                />
            }  
            
            @if (file.type === FileType.VIDEO) {
                <video 
                    controls 
                    style="max-width: 100%; width: 100%;" 
                    [height]="height" 
                    [width]="width"
                >
                    <source [src]="file.path" type="video/mp4">
                </video>
            }
            
            @if (file.type === FileType.OTHER) {
                <img 
                    src="/assets/svgs/file.svg" 
                    alt="file" 
                    style="max-width: 100%; width: 100%;" 
                    [height]="height" 
                    [width]="width"
                />
            }
        </div>

        @if (hasDownload) {
            <div class="name">
                <p>{{file.originalName}}</p>
            </div>
    
            <a [href]="file.path" [download]="file.originalName" target="_blank" class="download">
                <span>Baixar</span>
                <i class="pi pi-arrow-circle-down"></i>
            </a>
        }
    </div>
</ng-template>