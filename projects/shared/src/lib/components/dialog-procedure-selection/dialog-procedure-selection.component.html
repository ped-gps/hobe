<div id="dialog-procedure-selection">
	<main>
		<div class="table">
			<p-table
				[value]="procedures"
				[rows]="size"
				[totalRecords]="totalElements"
				[lazy]="true"
				[paginator]="true"
				[scrollable]="true"
				[loading]="isLoading"
				[first]="page * size"
				[sortField]="'name'"
				[(selection)]="selectedProcedure"
				(onPage)="onPageChange($event)"
				(onSort)="onSortChange($event)"
			>
				<ng-template #caption>
					<div class="filters">
						<div class="filter name">
							<p-iconfield>
								<input
									pInputText
									type="text"
									placeholder="Pesquisar"
									[(ngModel)]="textFilter"
									(input)="onInputChange()"
								/>
								<p-inputicon styleClass="pi pi-search" />
							</p-iconfield>
						</div>

						<div class="filter source">
							<p-select
								[options]="procedureSourceOptions"
								placeholder="Selecione"
								[(ngModel)]="selectedProcedureSource"
								(onChange)="onSourceChange()"
							/>
						</div>
					</div>
				</ng-template>
				<ng-template #header>
					<tr>
						<th style="width: 10%; text-align: center"></th>
						<th
							pSortableColumn="name"
							style="width: 50%; text-align: center"
						>
							Nome <p-sortIcon field="name" />
						</th>
						<th
							pSortableColumn="code"
							style="width: 20%; text-align: center"
						>
							CÃ³digo <p-sortIcon field="code" />
						</th>

						<th
							pSortableColumn="value"
							style="width: 20%; text-align: center"
						>
							Valor <p-sortIcon field="value" />
						</th>
					</tr>
				</ng-template>
				<ng-template #body let-procedure>
					<tr class="procedure">
						<td style="text-align: center">
							<p-tableRadioButton [value]="procedure" />
						</td>
						<td style="text-align: left">
							<span class="procedure-name">{{
								procedure.name
							}}</span>
						</td>
						<td style="text-align: center">
							<span class="procedure-code">{{
								procedure.code
							}}</span>
						</td>
						<td style="text-align: center">
							<span class="procedure-value">{{
								procedure.value | currency
							}}</span>
						</td>
					</tr>
				</ng-template>
				<ng-template #emptymessage>
					<tr>
						<td colspan="4" style="text-align: center">
							Nenhum registro encontrado
						</td>
					</tr>
				</ng-template>
			</p-table>
		</div>
	</main>

	<footer>
		<p-button
			label="Salvar"
			class="button-green-white"
			[disabled]="!selectedProcedure"
			(onClick)="onSubmit()"
		/>
	</footer>
</div>
